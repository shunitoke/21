@import "tailwindcss";
@import "tw-animate-css";

/* Critical theme styles - must be first */
html {
  color-scheme: dark;
}

@media (prefers-color-scheme: light) {
  html {
    color-scheme: light;
  }
}

@custom-variant dark (&:is(.dark *));

:root {
  --safe-area-top: env(safe-area-inset-top, 0px);
  --safe-area-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-left: env(safe-area-inset-left, 0px);
  --safe-area-right: env(safe-area-inset-right, 0px);
}

@theme inline {
  --font-romantic: "Zvezda NHZDN Bold Italic";
  --font-sans: var(--font-manrope);
  --font-serif: var(--font-fraunces);
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-border: hsl(var(--border));
  --color-ring: hsl(var(--ring));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-input: hsl(var(--input));
  --radius-sm: var(--radius-sm);
  --radius-md: var(--radius-md);
  --radius-lg: var(--radius-lg);
  --radius-xl: var(--radius-xl);
  --radius-2xl: var(--radius-2xl);
  --radius-3xl: var(--radius-3xl);
}

@font-face {
  font-family: "Zvezda NHZDN Bold Italic";
  src:
    url("/Zvezda NHZDN Bold Italic v.1.1.ttf") format("truetype"),
    url("/Zvezda NHZDN Bold Italic v.1.1.otf") format("opentype");
  font-weight: 700;
  font-style: italic;
  font-display: swap;
}

@keyframes habit-shake {
  0% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-1px);
  }
  50% {
    transform: translateX(1px);
  }
  75% {
    transform: translateX(-0.5px);
  }
  100% {
    transform: translateX(0);
  }
}

@keyframes anchor-wobble {
  0% {
    transform: rotate(0deg);
  }
  25% {
    transform: rotate(-0.6deg);
  }
  50% {
    transform: rotate(0.4deg);
  }
  75% {
    transform: rotate(-0.3deg);
  }
  100% {
    transform: rotate(0deg);
  }
}

@keyframes anchor-wobble-1 {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(-0.5deg); }
  50% { transform: rotate(0.3deg); }
  75% { transform: rotate(-0.2deg); }
}

@keyframes anchor-wobble-2 {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(0.4deg); }
  50% { transform: rotate(-0.3deg); }
  75% { transform: rotate(0.2deg); }
}

@keyframes anchor-wobble-3 {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(-0.4deg); }
  50% { transform: rotate(0.5deg); }
  75% { transform: rotate(-0.3deg); }
}

@keyframes spectrumPulse {
  0%,
  100% {
    transform: scaleY(0.4);
    opacity: 0.5;
  }
  50% {
    transform: scaleY(1);
    opacity: 1;
  }
}

@keyframes habit-shake-strong {
  0% {
    transform: translateX(0);
  }
  20% {
    transform: translateX(-2px);
  }
  40% {
    transform: translateX(2px);
  }
  60% {
    transform: translateX(-1.5px);
  }
  80% {
    transform: translateX(1.5px);
  }
  100% {
    transform: translateX(0);
  }
}

.translate-z-0 {
  transform: translateZ(0);
}

.animate-habit-shake {
  animation: habit-shake 0.2s ease-in-out;
}

.animate-habit-shake-strong {
  animation: habit-shake-strong 0.22s ease-in-out;
}

.animate-anchor-wobble {
  animation: anchor-wobble 0.28s ease-out;
  transform-origin: 50% 10%;
}

.animate-anchor-wobble-1 {
  animation: anchor-wobble-1 0.3s ease-out;
  transform-origin: 50% 10%;
}

.animate-anchor-wobble-2 {
  animation: anchor-wobble-2 0.25s ease-out;
  transform-origin: 50% 10%;
}

.animate-anchor-wobble-3 {
  animation: anchor-wobble-3 0.35s ease-out;
  transform-origin: 50% 10%;
}

:root {
  --font-romantic: "Zvezda NHZDN Bold Italic";
  --background: 240 10% 3.9%;
  --foreground: 0 0% 98%;
  --card: 240 10% 3.9%;
  --card-foreground: 0 0% 98%;
  --popover: 240 10% 3.9%;
  --popover-foreground: 0 0% 98%;
  --primary: 0 0% 98%;
  --primary-foreground: 240 5.9% 10%;
  --secondary: 240 3.7% 15.9%;
  --secondary-foreground: 0 0% 98%;
  --muted: 240 3.7% 15.9%;
  --muted-foreground: 240 5% 64.9%;
  --accent: 240 3.7% 15.9%;
  --accent-foreground: 0 0% 98%;
  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 0 0% 98%;
  --border: 240 3.7% 15.9%;
  --input: 240 3.7% 10%;
  --ring: 240 4.9% 83.9%;
  --radius: 0.75rem;
  --chart-1: 220 70% 50%;
  --chart-2: 160 60% 45%;
  --chart-3: 30 80% 55%;
  --chart-4: 280 65% 60%;
  --chart-5: 340 75% 55%;
  --chart-6: 200 75% 55%;
  --chart-7: 120 55% 50%;
  --chart-8: 45 90% 55%;
  --chart-9: 300 60% 65%;
  --chart-10: 10 70% 55%;
  --chart-11: 260 65% 55%;

  --radius-xs: 4px;
  --radius-sm: 6px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  --radius-2xl: 18px;
  --radius-3xl: 24px;
  --radius-full: 999px;

  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;
  --space-8: 32px;
  --space-10: 40px;
  --space-12: 48px;

  --font-size-xs: 11px;
  --font-size-sm: 13px;
  --font-size-md: 15px;
  --font-size-lg: 18px;
  --font-size-xl: 22px;
  --font-size-2xl: 26px;

  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;

  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07);
  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
  --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.1);
  --shadow-2xl: 0 25px 50px rgba(0, 0, 0, 0.25);

  --transition-fast: 150ms;
  --transition-normal: 200ms;
  --transition-slow: 300ms;
  --transition-base: all var(--transition-normal) ease;

  --app-bg: hsl(var(--background));
  --app-text: hsl(var(--foreground));
  --app-text-muted: hsl(var(--muted-foreground));
  --modal-overlay: rgba(255, 255, 255, 0.58);
  --modal-overlay-strong: rgba(255, 255, 255, 0.82);
  --anchor-card-bg: hsl(var(--card));
  --anchor-card-border: hsl(var(--border));
  --modal-bg: hsl(var(--popover));
  --modal-border: hsl(var(--border));
  --input-bg: hsl(var(--input));
}

[data-theme="light"],
[data-appearance="light"] {
  --background: 0 0% 100%;
  --foreground: 240 10% 3.9%;
  --card: 0 0% 100%;
  --card-foreground: 240 10% 3.9%;
  --popover: 0 0% 100%;
  --popover-foreground: 240 10% 3.9%;
  --primary: 240 5.9% 10%;
  --primary-foreground: 0 0% 98%;
  --secondary: 240 4.8% 95.9%;
  --secondary-foreground: 240 5.9% 10%;
  --muted: 240 4.8% 95.9%;
  --muted-foreground: 240 3.8% 46.1%;
  --accent: 240 4.8% 95.9%;
  --accent-foreground: 240 5.9% 10%;
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 0 0% 98%;
  --border: 240 5.9% 90%;
  --input: 240 4.8% 94%;
  --ring: 240 5% 64.9%;
  --modal-overlay: rgba(255, 255, 255, 0.58);
  --modal-overlay-strong: rgba(255, 255, 255, 0.82);
}

[data-theme="dark"],
[data-appearance="dark"] {
  --modal-overlay: rgba(8, 8, 10, 0.32) !important;
  --modal-overlay-strong: rgba(8, 8, 10, 0.7) !important;
}


@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply text-foreground antialiased;
    font-family: var(--font-sans);
    font-size: 15px;
  }
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: var(--font-serif);
  }
}

body {
  min-height: 100svh;
  padding-top: var(--safe-area-top);
  padding-bottom: var(--safe-area-bottom);
  padding-left: var(--safe-area-left);
  padding-right: var(--safe-area-right);
  scrollbar-gutter: stable;
  overflow-y: scroll;
  max-width: 100vw;
  overflow-x: hidden;
}

html {
  font-size: 15px;
  max-width: 100vw;
  overflow-x: hidden;
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

.app-root {
  max-width: 100vw;
}

/* Allow horizontal swipes to pass through to screen navigation */
[data-slot="chart"],
[data-slot="carousel"],
[data-slot="carousel-content"],
.recharts-wrapper,
.recharts-surface,
.recharts-responsive-container {
  touch-action: pan-y !important;
}

@media (max-width: 640px) {
  html {
    font-size: 14px;
  }

  .app-root {
    padding-left: 12px !important;
    padding-right: 12px !important;
  }

  [data-slot="card"] {
    padding-top: 16px;
    padding-bottom: 16px;
    gap: 16px;
  }

  [data-slot="card-header"],
  [data-slot="card-content"],
  [data-slot="card-footer"] {
    padding-left: 16px;
    padding-right: 16px;
  }

  [data-slot="card-header"] {
    padding-bottom: 16px;
  }

  [data-slot="button"][data-size="default"] {
    height: 34px;
    padding-left: 12px;
    padding-right: 12px;
    font-size: 0.9rem;
  }

  [data-slot="button"][data-size="sm"] {
    height: 30px;
    padding-left: 10px;
    padding-right: 10px;
    font-size: 0.85rem;
  }

  [data-slot="button"][data-size="icon"] {
    width: 34px;
    height: 34px;
  }
}

body:has([data-slot="dialog-overlay"]) {
  --modal-blur-active: 1;
}

body:has([data-slot="dialog-overlay"]) .app-root,
body:has([data-slot="alert-dialog-overlay"]) .app-root {
  filter: blur(14px) saturate(1.2);
  transition: filter var(--transition-normal) ease;
  transform: translateZ(0);
  will-change: filter;
}

@supports ((backdrop-filter: blur(0)) or (-webkit-backdrop-filter: blur(0))) {
  [data-slot="dialog-overlay"],
  [data-slot="alert-dialog-overlay"] {
    background: var(--modal-overlay);
  }
}

[data-slot="dialog-overlay"],
[data-slot="alert-dialog-overlay"] {
  background: var(--modal-overlay-strong);
  backdrop-filter: blur(32px) saturate(1.4);
  -webkit-backdrop-filter: blur(32px) saturate(1.4);
  contain: layout paint;
  will-change: opacity;
}

